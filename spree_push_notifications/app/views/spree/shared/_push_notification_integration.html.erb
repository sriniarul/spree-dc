<%# Push Notification Integration Partial %>
<%# This partial includes the necessary JavaScript and initialization for push notifications %>

<script>
// Initialize push notification functionality when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  // Only initialize if push notifications are supported
  if ('serviceWorker' in navigator && 'PushManager' in window) {
    // The actual push notification logic is loaded via importmap
    // from spree/push_notifications.js which handles:
    // - Service worker registration
    // - Permission requests
    // - Subscription management
    console.log('Push notifications supported - initialization handled by spree/push_notifications.js');
  } else {
    console.log('Push notifications not supported in this browser');
  }
});
</script>

<%# Service Worker Registration Script %>
<script>
// Register service worker for push notifications
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/service-worker.js')
      .then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
      })
      .catch(function(err) {
        console.log('ServiceWorker registration failed: ', err);
      });
  });
}
</script>