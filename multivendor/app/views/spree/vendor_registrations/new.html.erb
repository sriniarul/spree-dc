<% content_for :title, Spree.t('multivendor.vendor_registration') %>

<div class="page-container">
  <div class="mx-auto max-w-4xl py-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-2">
        <%= Spree.t('multivendor.become_vendor_title') %>
      </h1>
      <p class="text-gray-600">
        <%= Spree.t('multivendor.vendor_registration_subtitle') %>
      </p>
    </div>

    <!-- Registration Form -->
    <div class="bg-white rounded-lg shadow-sm border p-8">
      <% if @vendor&.errors&.any? || @user&.errors&.any? %>
        <div class="alert-error text-center mb-4 p-2 bg-red-100 border border-red-400 text-red-700 rounded">
          <ul class="list-disc list-inside">
            <% @vendor&.errors&.full_messages&.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
            <% @user&.errors&.full_messages&.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <%= form_with model: @vendor, url: vendor_registrations_path, local: true,
                    html: { class: 'space-y-8' } do |vendor_form| %>

        <!-- User Account Section -->
        <div class="border-b pb-8">
          <h2 class="text-xl font-semibold mb-4 text-gray-900">
            <%= Spree.t('multivendor.account_information') %>
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <%= fields_for :user, @user do |user_form| %>
              <div>
                <%= user_form.label :first_name, class: 'block text-sm font-medium text-gray-700 mb-2' %>
                <%= user_form.text_field :first_name,
                    class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                    required: true %>
              </div>
              <div>
                <%= user_form.label :last_name, class: 'block text-sm font-medium text-gray-700 mb-2' %>
                <%= user_form.text_field :last_name,
                    class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                    required: true %>
              </div>
              <div class="md:col-span-2">
                <%= user_form.label :email, class: 'block text-sm font-medium text-gray-700 mb-2' %>
                <%= user_form.email_field :email,
                    class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                    required: true %>
              </div>
              <div>
                <%= user_form.label :password, class: 'block text-sm font-medium text-gray-700 mb-2' %>
                <%= user_form.password_field :password,
                    class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                    required: true %>
              </div>
              <div>
                <%= user_form.label :password_confirmation, class: 'block text-sm font-medium text-gray-700 mb-2' %>
                <%= user_form.password_field :password_confirmation,
                    class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                    required: true %>
              </div>
            <% end %>
          </div>
        </div>

        <!-- Business Information Section -->
        <div class="border-b pb-8">
          <h2 class="text-xl font-semibold mb-4 text-gray-900">
            <%= Spree.t('multivendor.business_information') %>
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="md:col-span-2">
              <%= vendor_form.label :legal_name, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.text_field :legal_name,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: Spree.t('multivendor.legal_name_placeholder'),
                  required: true %>
              <p class="text-sm text-gray-500 mt-1"><%= Spree.t('multivendor.legal_name_help') %></p>
            </div>

            <div>
              <%= vendor_form.label :business_type, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.select :business_type,
                  options_for_select([['Select Business Type', '']] + Spree::Vendor::BUSINESS_TYPES.map { |type| [type, type] }),
                  {},
                  { class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                    required: true } %>
            </div>

            <div>
              <%= vendor_form.label :registration_number, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.text_field :registration_number,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: Spree.t('multivendor.registration_number_placeholder'),
                  required: true %>
              <p class="text-sm text-gray-500 mt-1"><%= Spree.t('multivendor.registration_number_help') %></p>
            </div>

            <div>
              <%= vendor_form.label :trade_name, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.text_field :trade_name,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: Spree.t('multivendor.trade_name_placeholder') %>
              <p class="text-sm text-gray-500 mt-1"><%= Spree.t('multivendor.trade_name_help') %></p>
            </div>

            <div>
              <%= vendor_form.label :incorporation_date, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.date_field :incorporation_date,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500' %>
            </div>
          </div>
        </div>

        <!-- Address Information Section -->
        <div class="border-b pb-8">
          <h2 class="text-xl font-semibold mb-4 text-gray-900">
            <%= Spree.t('multivendor.business_address') %>
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <%= vendor_form.label :country_code, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.select :country_code,
                  options_from_collection_for_select(@countries, :iso, :name, @vendor.country_code),
                  { prompt: Spree.t('multivendor.select_country') },
                  { class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                    required: true } %>
            </div>

            <div>
              <%= vendor_form.label :state_province, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.text_field :state_province,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: Spree.t('multivendor.state_province_placeholder'),
                  required: true %>
            </div>

            <div>
              <%= vendor_form.label :city, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.text_field :city,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: Spree.t('multivendor.city_placeholder'),
                  required: true %>
            </div>

            <div>
              <%= vendor_form.label :postal_code, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.text_field :postal_code,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: Spree.t('multivendor.postal_code_placeholder'),
                  required: true %>
            </div>

            <div class="md:col-span-2">
              <%= vendor_form.label :address_line1, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.text_field :address_line1,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: Spree.t('multivendor.address_line1_placeholder'),
                  required: true %>
            </div>

            <div class="md:col-span-2">
              <%= vendor_form.label :address_line2, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.text_field :address_line2,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: Spree.t('multivendor.address_line2_placeholder') %>
            </div>
          </div>
        </div>

        <!-- Contact Information Section -->
        <div class="pb-8">
          <h2 class="text-xl font-semibold mb-4 text-gray-900">
            <%= Spree.t('multivendor.contact_information') %>
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <%= vendor_form.label :phone_number, class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.telephone_field :phone_number,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: Spree.t('multivendor.phone_number_placeholder'),
                  required: true %>
            </div>

            <div>
              <%= vendor_form.label :website_url, "Website URL", class: 'block text-sm font-medium text-gray-700 mb-2' %>
              <%= vendor_form.url_field :website_url,
                  class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
                  placeholder: 'https://yourwebsite.com' %>
              <p class="text-sm text-gray-500 mt-1">Your business website (optional)</p>
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <a href="/" style="padding: 8px 16px; background: white; border: 1px solid #d1d5db; border-radius: 6px; text-decoration: none; color: #374151;">Cancel</a>

            <input type="submit" value="Submit Vendor Registration" style="padding: 12px 24px; background: #2563eb; color: white; border: none; border-radius: 6px; font-weight: 500; cursor: pointer;">
          </div>
        </div>

        <!-- Consent Checkbox -->
        <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
          <div style="display: flex; align-items: flex-start; gap: 8px;">
            <input type="checkbox" name="vendor[consent]" id="vendor_consent" value="1" required style="margin-top: 2px;">
            <label for="vendor_consent" style="font-size: 14px; color: #374151; cursor: pointer; line-height: 1.4;">
              I agree to the <a href="/terms" target="_blank" style="color: #2563eb; text-decoration: underline;">Terms of Service</a> and <a href="/vendor-agreement" target="_blank" style="color: #2563eb; text-decoration: underline;">Vendor Agreement</a>, and I consent to the processing of my personal and business data for vendor registration purposes.
            </label>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>